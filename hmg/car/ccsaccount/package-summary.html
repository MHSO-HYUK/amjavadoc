<!DOCTYPE HTML>
<html lang="ko">
<head>
<!-- Generated by javadoc (17) on Fri Nov 22 13:30:09 KST 2024 -->
<title>hmg.car.ccsaccount</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="dc.created" content="2024-11-22">
<meta name="description" content="declaration: package: hmg.car.ccsaccount">
<meta name="generator" content="javadoc/PackageWriterImpl">
<link rel="stylesheet" type="text/css" href="../../../stylesheet.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../script-dir/jquery-ui.min.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../jquery-ui.overrides.css" title="Style">
<script type="text/javascript" src="../../../script.js"></script>
<script type="text/javascript" src="../../../script-dir/jquery-3.7.1.min.js"></script>
<script type="text/javascript" src="../../../script-dir/jquery-ui.min.js"></script>
</head>
<body class="package-declaration-page">
<script type="text/javascript">var pathtoroot = "../../../";
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<div class="flex-box">
<header role="banner" class="flex-header">
<nav role="navigation">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="top-nav" id="navbar-top">
<div class="skip-nav"><a href="#skip-navbar-top" title="Skip navigation links">Skip navigation links</a></div>
<ul id="navbar-top-firstrow" class="nav-list" title="Navigation">
<li><a href="../../../index.html">Overview</a></li>
<li class="nav-bar-cell1-rev">Package</li>
<li>Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../index-all.html">Index</a></li>
<li><a href="../../../help-doc.html#package">Help</a></li>
</ul>
</div>
<div class="sub-nav">
<div>
<ul class="sub-nav-list">
<li>Package:&nbsp;</li>
<li><a href="#package-description">Description</a>&nbsp;|&nbsp;</li>
<li>Related Packages&nbsp;|&nbsp;</li>
<li><a href="#class-summary">Classes and Interfaces</a></li>
</ul>
</div>
<div class="nav-list-search"><label for="search-input">SEARCH:</label>
<input type="text" id="search-input" value="search" disabled="disabled">
<input type="reset" id="reset-button" value="reset" disabled="disabled">
</div>
</div>
<!-- ========= END OF TOP NAVBAR ========= -->
<span class="skip-nav" id="skip-navbar-top"></span></nav>
</header>
<div class="flex-content">
<main role="main">
<div class="header">
<h1 title="Package hmg.car.ccsaccount" class="title">Package hmg.car.ccsaccount</h1>
</div>
<hr>
<div class="package-signature">package <span class="element-name">hmg.car.ccsaccount</span></div>
<section class="package-description" id="package-description">
<div class="block">본 가이드 페이지는 CCS Account Token을 필요로 하는 클라이언트를 대상으로 작성되었습니다.
 <h2>Overview.</h2>
 <hr class="hr-default">
 CCS Access Token의 관리, 갱신 및 발급은 Android에서 제공하는
 <a href="https://developer.android.com/reference/android/accounts/AccountManager">
 android.accounts.AccountManager </a>
 를 사용합니다.
 <br>
 <br>
 <h2>Precondition.</h2>
 <hr class="hr-default">
 - HMGCP yymmdd 일자 이후 버전 사용. (이전 버전의 경우, ccsaccountlink 서비스가 동작하지 않습니다.) <br>
 - Connect API (HMG Car Lib) Setup이 되어있는 환경에서 진행해주세요.
 <br>
 <br>
 <h2>How to Use.</h2>
 <hr class="hr-default">
 <h3 id="HowtoUse">CCS Access Token을 가져오는 방법</h3>

 <strong> 1. accountManager 객체를 생성합니다.</strong> 
 <h4> <a href="#get"> android.accounts.AccountManager.get </a> </h4>
 <pre><code>val am = AccountManager.get(context)</code></pre>
 
 <strong> 2. CCS AccountType의 Account를 가져옵니다.</strong>
 <h4> <a href="#getAccountsByType"> android.accounts.AccountManager.getAccountsByType </a> </h4>
 <pre><code>import hmg.car.ccsaccount.account.ACCOUNT_TYPE
 
val account = am.getAccountsByType(ACCOUNT_TYPE)</code></pre>
 
 <strong> 3. 가져온 Account를 기반으로 Access Token을 요청합니다.</strong> 
 <h4> <a href="#getAuthToken"> android.accounts.AccountManager.getAuthToken </a> </h4>
 <pre><code>import hmg.car.ccsaccount.account.AUTH_TOKEN_TYPE
 
val tokenBundle = am.getAuthToken(account, AUTH_TOKEN_TYPE, null, false, null, null).result
val token = tokenBundle?.getString(AccountManager.KEY_AUTHTOKEN))</code></pre>
 
 <strong> 4. 가져온 token으로 CCS 서버와의 통신이 실패하는 경우, Token을 무효화하고, 다시 Access Token을 요청해주세요.</strong> 
 <h4> <a href="#invalidateAuthToken"> android.accounts.AccountManager.invalidateAuthToken </a> </h4>
 <pre><code>am.invalidateAuthToken(ACCOUNT_TYPE, token)</code></pre>
 <br>
 <h2>Reference.</h2>
 <hr class="hr-default">
 <h3 id="get"><a href="https://developer.android.com/reference/android/accounts/AccountManager#get(android.content.Context)">
 android.accounts.AccountManager.get </a> : AccountManager Instance 생성</h3>
 <div class="wrap-text">
 <p>
 현재 `Context`를 기반으로 `AccountManager` 인스턴스를 가져옵니다.
 </p>
 <div class="section">
 <p>
 <strong>Input Parameters:</strong>
 </p>
 <ul>
 <li><strong>Context context</strong>: 현재 작업 중인 `Context`를 전달합니다. 일반적으로
 `Activity`, `Service`, 또는 `ApplicationContext`를 사용합니다. `null`을 전달하면 예외가 발생하므로
 반드시 유효한 Context를 사용해야 합니다.</li>
 </ul>
 </div>
 <div class="section">
 <p>
 <strong>Return Value:</strong>
 </p>
 <ul>
 <li><strong>AccountManager</strong>: `AccountManager`의 싱글톤 인스턴스를 반환합니다.</li>
 </ul>
 </div>
 <div class="section">
 <p>
 <strong>Possible Errors:</strong>
 </p>
 <ul>
 <li><strong>IllegalArgumentException</strong>: 유효하지 않은 컨텍스트를 전달한 경우.</li>
 </ul>
 </div>
 </div>

 <hr class="hr-wavy">

 <h3 id="getAccountsByType"><a href="https://developer.android.com/reference/android/accounts/AccountManager#getAccountsByType(java.lang.String)">
 android.accounts.AccountManager.getAccountsByType </a> : CCS Account 가져오기
 </h3>
 <div class="wrap-text">
 <p>
 지정된 유형의 계정을 반환합니다. CCS 계정을 가져오는 데 사용됩니다.
 </p>
 <div class="section">
 <p>
 <strong>Input Parameters:</strong>
 </p>
 <ul>
 <li><strong>String accountType</strong>: 가져올 계정 유형. (예:
 hmg.car.ccsaccount.account.ACCOUNT_TYPE).</li>
 </ul>
 </div>
 <div class="section">
 <p>
 <strong>Return Value:</strong>
 </p>
 <ul>
 <li><strong>Account[]</strong>: 지정된 유형의 모든 계정 배열. 해당 타입의 계정이 없을 경우 빈 배열이
 반환됩니다.</li>
 </ul>
 </div>
 <div class="section">
 <p>
 <strong>Possible Errors:</strong>
 </p>
 <ul>
 <li><strong>SecurityException</strong>: 호출자가 지정된 타입의 계정에 접근할 권한이 없는 경우 발생합니다.
 </li>
 </ul>
 </div>
 </div>
 <hr class="hr-wavy">

 <h3 id="getUserData"><a href="https://developer.android.com/reference/android/accounts/AccountManager#getUserData(android.accounts.Account%2C%20java.lang.String)">
 android.accounts.AccountManager.getUserData </a> : 계정의 사용자 정의 데이터 가져오기</h3>
 <div class="wrap-text">
 <p>
 지정된 계정에 연결된 사용자 정의 데이터를 반환합니다.
 </p>
 <div class="section">
 <p>
 <strong>Input Parameters:</strong>
 </p>
 <ul>
 <li><strong>Account account</strong>: 데이터를 가져올 대상 계정.
 AccountManager.getAccountsByType() 메서드 등을 통해 얻을 수 있습니다.</li>
 <li><strong>String key</strong>: 사용자 정의 데이터의 키. 지정된 키에 해당하는 데이터가 없으면 null을
 반환합니다.</li>
 </ul>
 </div>
 <div class="section">
 <p>
 <strong>Return Value:</strong>
 </p>
 <ul>
 <li><strong>String</strong>: 사용자 정의 데이터 값 . 만약 해당 키에 데이터가 없으면 null을
 반환합니다.</li>
 </ul>
 </div>
 <div class="section">
 <p>
 <strong>Possible Errors:</strong>
 </p>
 <ul>
 <li><strong>SecurityException</strong>: 적절한 권한이 없는 경우.</li>
 </ul>
 </div>
 </div>
 <hr class="hr-wavy">

 <h3 id="addOnAccountsUpdatedListener"><a href="https://developer.android.com/reference/android/accounts/AccountManager#addOnAccountsUpdatedListener(android.accounts.OnAccountsUpdateListener%2C%20android.os.Handler%2C%20boolean%2C%20java.lang.String[])">
 android.accounts.AccountManager.addOnAccountsUpdatedListener </a> / <a href="https://developer.android.com/reference/android/accounts/AccountManager#removeOnAccountsUpdatedListener(android.accounts.OnAccountsUpdateListener)">
 android.accounts.AccountManager.removeOnAccountsUpdateListener </a> : 계정 상태
 변경 이벤트 감지</h3>
 <div class="wrap-text">
 <p>
 계정 변경 사항(추가, 삭제 등)을 감지하기 위해 리스너를 추가하거나 제거합니다.
 </p>
 <div class="section">
 <p>
 <strong>addOnAccountsUpdatedListener Input Parameters:</strong>
 </p>
 <ul>
 <li><strong>OnAccountsUpdateListener listener</strong>: 업데이트 이벤트를 수신할 리스너. 필수
 매개변수이며, 계정 변경 시 호출됩니다.</li>
 <li><strong>Handler handler</strong>: 이벤트가 호출될 핸들러. `null`인 경우 기본 스레드(일반적으로
 메인 스레드)에서 실행됩니다.</li>
 <li><strong>boolean updateImmediately</strong>: 즉시 업데이트 여부. `true`로 설정하면 등록
 즉시 `onAccountsUpdated()`가 호출됩니다.</li>
 <li><strong>String[] accountTypes</strong>: 감지할 계정 유형 배열. `null` 전달 시 모든 계정
 유형을 모니터링.</li>
 </ul>
 </div>
 <div class="section">
 <p>
 <strong>removeOnAccountsUpdatedListener Input Parameters:</strong>
 </p>
 <ul>
 <li><strong>OnAccountsUpdateListener listener</strong>: 제거하려는
 `OnAccountsUpdateListener` 객체입니다.</li>
 </ul>
 </div>
 <div class="section">
 <p>
 <strong>Return Value:</strong>
 </p>
 <ul>
 <li><strong>없음</strong></li>
 </ul>
 </div>
 <div class="section">
 <p>
 <strong>Possible Errors:</strong>
 </p>
 <ul>
 <li><strong>IllegalArgumentException</strong>: 유효하지 않은 리스너를 추가 또는 제거하려고 할
 때.</li>
 </ul>
 </div>
 </div>
 <hr class="hr-wavy">

 <h3 id="getAuthToken"><a href="https://developer.android.com/reference/android/accounts/AccountManager#getAuthToken(android.accounts.Account%2C%20java.lang.String%2C%20android.os.Bundle%2C%20boolean%2C%20android.accounts.AccountManagerCallback%3Candroid.os.Bundle%3E%2C%20android.os.Handler)">
 android.accounts.AccountManager.getAuthToken </a> : Access Token 요청</h3>
 <div class="wrap-text">
 <p>
 특정 계정과 스코프에 대해 Access Token을 요청합니다.
 </p>
 <div class="section">
 <p>
 <strong>Input Parameters:</strong>
 </p>
 <ul>
 <li><strong>Account account</strong>: 토큰을 요청할 계정. `getAccountsByType()` 등을
 사용하여 가져온 `Account` 객체를 전달합니다.</li>
 <li><strong>String authTokenType</strong>: 요청할 토큰 유형. API 또는 서버에서 요구하는 특정 토큰
 유형 문자열을 전달합니다. (예: hmg.car.ccsaccount.account.AUTH_TOKEN_TYPE)</li>
 <li><strong>Bundle options</strong>: 인증 과정에서 필요한 추가 데이터가 있다면 포함할 수 있지만, 일반적으로
 `null`을 사용합니다.</li>
 <li><strong>boolean notifyAuthFailure</strong>: 인증 실패 시 알림 여부. `true`로 입력하는
 경우, 인증 실패 시 알림을 표시합니다.</li>
 <li><strong>AccountManagerCallback&lt;Bundle&gt; callback</strong>: 비동기 요청
 결과를 처리하기 위한 콜백입니다.</li>
 <li><strong>Handler handler</strong>: 콜백이 호출될 핸들러, `null`일 경우 기본 핸들러가
 사용됩니다.</li>
 </ul>
 </div>
 <div class="section">
 <p>
 <strong>Return Value:</strong>
 </p>
 <ul>
 <li><strong>AccountManagerFuture&lt;Bundle&gt;</strong>: 객체를 반환하며, 이를 통해
 동기적으로 결과를 가져올 수 있습니다.</li>
 </ul>
 </div>
 <div class="section">
 <p>
 <strong>Possible Errors:</strong>
 </p>
 <ul>
 <li><strong>AuthenticatorException</strong>: 인증 프로세스 중 문제가 발생한 경우 발생합니다.</li>
 <li><strong>OperationCanceledException</strong>: 작업이 취소된 경우.</li>
 </ul>
 </div>
 
 <div class="section">
 <p>
 <strong> Example Code (Asynchronous Request) </strong>
 </p>
 
 <pre><code>accountManager.getAuthToken(account, authTokenType, null, false, { future -&gt;
     try {
         val result = future.result
         val authToken = result.getString(AccountManager.KEY_AUTHTOKEN)
 }, null)}</code></pre>

 <p>
 <strong> Example Code (Synchronous Request) </strong>
 </p>
 
 <pre><code>val future = accountManager.getAuthToken(account, authTokenType, null, false, null, null)
 val result = future.result
 val authToken = result.getString(AccountManager.KEY_AUTHTOKEN)</code></pre>
 
 </div>
 </div>
 <hr class="hr-wavy">

 <h3 id="invalidateAuthToken"><a href="https://developer.android.com/reference/android/accounts/AccountManager#invalidateAuthToken(java.lang.String%2C%20java.lang.String)">
 android.accounts.AccountManager.invalidateAuthToken </a> : Access Token 무효화
 </h3>
 <div class="wrap-text">
 <p>
 지정된 토큰을 무효화합니다.
 </p>
 <div class="section">
 <p>
 <strong>Input Parameters:</strong>
 </p>
 <ul>
 <li><strong>String accountType</strong>: 계정 유형. (예:
 hmg.car.ccsaccount.account.ACCOUNT_TYPE).</li>
 <li><strong>String authToken</strong>: 무효화할 토큰, 서버와 동기화된 상태를 유지하기 위해, 사용자가 더
 이상 해당 토큰을 사용할 수 없도록 설정합니다.</li>
 </ul>
 </div>
 <div class="section">
 <p>
 <strong>Return Value:</strong>
 </p>
 <ul>
 <li><strong>없음</strong></li>
 </ul>
 </div>
 <div class="section">
 <p>
 <strong>Possible Errors:</strong>
 </p>
 <ul>
 <li><strong>SecurityException </strong>: 호출자가 해당 작업을 수행할 권한이 없는 경우
 발생합니다.</li>
 <li><strong>IllegalArgumentException</strong>: 잘못된 토큰 또는 계정 유형.</li>
 </ul>
 </div>
 </div>
 <hr class="hr-wavy"></div>
</section>
<section class="summary">
<ul class="summary-list">
<li>
<div id="class-summary">
<div class="caption"><span>Classes</span></div>
<div class="summary-table two-column-summary">
<div class="table-header col-first">Class</div>
<div class="table-header col-last">Description</div>
<div class="col-first even-row-color class-summary class-summary-tab2"><a href="account.html" title="class in hmg.car.ccsaccount">account</a></div>
<div class="col-last even-row-color class-summary class-summary-tab2">
<div class="block">account는 CCS 계정 토큰을 얻기 위한 클라이언트 앱을 위한 계정 및 토큰 정보를 포함하고 있는 클래스입니다.</div>
</div>
<div class="col-first odd-row-color class-summary class-summary-tab2"><a href="intent.html" title="class in hmg.car.ccsaccount">intent</a></div>
<div class="col-last odd-row-color class-summary class-summary-tab2">
<div class="block">intent는 CCS 계정 토큰을 얻기 위한 클라이언트 앱을 위한 인텐트 값을 포함하고 있는 클래스입니다.</div>
</div>
</div>
</div>
</li>
</ul>
</section>
</main>
</div>
</div>
</body>
</html>
